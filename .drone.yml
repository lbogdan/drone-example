---
kind: pipeline
name: build

steps:
  - name: show environment
    image: node:10.16.3-jessie
    commands:
      - printenv

  - name: build and push image
    image: plugins/docker
    settings:
      repo: lbogdan/drone-example
      tags:
      - latest
      - ${DRONE_TAG}
      username: lbogdan
      password:
        from_secret: docker-password

trigger:
  # event: push
  # branch: main
  ref:
    - refs/tags/v*
---
kind: pipeline
name: deploy

steps:
  - name: show environment
    image: node:10.16.3-jessie
    commands:
      - printenv

trigger:
  event:
    - promote
---
kind: signature
hmac: 8660efa9bd424ea1acadff2ffb6d4a1c94bef4963556174d540325e6d2f8c6ae

...
